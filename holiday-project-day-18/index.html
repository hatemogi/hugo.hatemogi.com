<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="프로젝트 18일: Grunt - 자바스크립트 작업 실행기">
  <meta property="og:type" content="website">
  <meta property="og:image" content="">
  <meta property="og:url" content="http://hatemogi.com/holiday-project-day-18/">
  <meta property="og:description" content="소프트웨어 개발자, 김대현의 블로그">
  <title>프로젝트 18일: Grunt - 자바스크립트 작업 실행기</title>
  <link rel="canonical" href="http://hatemogi.com/holiday-project-day-18/">
  <link rel="stylesheet" href="/css/bootstrap.flatly.css">
  <link rel="stylesheet" href="/css/bootstrap-social.css">
  <link rel="stylesheet" href="/css/highlight/github.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/awjordan.css">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/highlight.pack.js"></script>
  <script src="/js/d3.min.js"></script>
  <script src="/js/hatemogi.js"></script>
</head>
<body>

<nav class="navbar navbar-default navbar-static-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand logo" href="/">
      hatemogi
      </a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="/about">소개</a></li>
      <li><a href="/post">블로그</a></li>
      
      
    </ul>
    <ul class="nav navbar-nav hidden-xs navbar-right">
      <li><a href="https://twitter.com/@hatemogi"><i class="fa fa-twitter fa-lg"></i></a></li>
      <li><a href="https://github.com/hatemogi"><i class="fa fa-github fa-lg"></i></a></li>
      <li><a href="https://medium.com/hatemogi"><i class="fa fa-medium fa-lg"></i></a></li>
    </ul>
  </div>
</nav>

<div class="layout">
  <ol class="breadcrumb">
    <li><a href="/">홈</a></li>
    <li><a href="/post">블로그</a></li>
    <li class="active">프로젝트 18일: Grunt - 자바스크립트 작업 실행기</li>
  </ol>

  <div class="pure-u-1">
    
    <div class="posts">
      
      <section class="post">
        <header class="post-header">
          <h2 class="post-title">
            프로젝트 18일: Grunt - 자바스크립트 작업 실행기
          </h2>

          <p class="post-meta">
            <i class="fa fa-calendar-o"></i>
            2014-05-24
            
          </p>
        </header>

        <div class="post-description">
          

<p>개인 프로젝트 18일째, 오늘은 자바스크립트 작업 실행기(task runner), <a href="http://gruntjs.com/">Grunt</a>를 프로젝트에 적용했다. 자동화 테스트를 실행하거나, 자바스크립트 파일들을 합치거나 최소화하는 일처럼 자주 반복하는 프로젝트 수반 작업을 편리하게 실행할 수 있게 해주는 도구다.</p>

<p>Node 환경에서는, npm만으로도 충분할 수 있는데, <a href="http://gruntjs.com/">Grunt</a>에 몇 가지 마음에 드는 <a href="https://github.com/gruntjs">플러그인</a>이 있어서, 곧바로 적용해 보기로 했다.</p>

<p>우선 npm으로 간단히 Grunt를 설치한다.</p>

<pre><code>npm install -g grunt
</code></pre>

<h2 id="gruntfile-기본:3c636ce3d1e45b6e02b2bb52d247e81f">Gruntfile 기본</h2>

<p>Make를 쓸 때 Makefile이나 Rake를 쓸 때 Rakefile이 있듯, Grunt를 위해서는 <code>Gruntfile.js</code>가 있다. 프로젝트 디렉터리에 있는 이 파일을 기준으로 각종 작업을 실행한다.</p>

<h3 id="gruntfile-js-예제:3c636ce3d1e45b6e02b2bb52d247e81f">Gruntfile.js 예제</h3>

<pre><code class="language-js">module.exports = function(grunt) {
  // 작업을 위한 설정
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
      build: {
        src: 'src/app.js',
        dest: 'build/app.min.js'
      }
    }
  });

  // &quot;uglify&quot; 작업을 위한 플러그인 등록
  grunt.loadNpmTasks('grunt-contrib-uglify');

  // 기본 작업에 'uglify' 등록
  grunt.registerTask('default', ['uglify']);
};
</code></pre>

<p>위와 같은 <code>Gruntfile.js</code>를 프로젝트 최상위 디렉터리에 두고,</p>

<pre><code class="language-bash">grunt
</code></pre>

<p>위의 명령을 실행하면, 아무 작업 이름을 주지 않았으므로 <code>default</code> 작업을 실행하려고 하며, 위 <code>Gruntfile.js</code>의 최하단에 명시한 대로 <code>uglify</code> 작업을 진행한다. 그러면, <a href="https://github.com/gruntjs/grunt-contrib-uglify">uglify 플러그인</a>로 등록한 작업을 한다.</p>

<p>즉, 위 예제의 경우</p>

<pre><code class="language-bash">grunt uglify
</code></pre>

<p>라고 실행해도 결과는 같다. 참고로 <code>Gruntfile.js</code> 대신 <code>Gruntfile.coffee</code> 파일을 준비해 둬도 그 역할은 같으며, 단지 자바스크립트 대신 커피스크립트 문법으로 해석한다.</p>

<h2 id="grunt-플러그인-추가:3c636ce3d1e45b6e02b2bb52d247e81f">Grunt 플러그인 추가</h2>

<p><a href="https://github.com/gruntjs">플러그인</a>이 꽤 많았고, 그중 아래의 플러그인을 골라 설치했다.</p>

<ul>
<li><a href="https://github.com/gruntjs/grunt-contrib-coffee">grunt-contrib-coffee</a>: 커피스크립트 컴파일</li>
<li><a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a>: Ugilfy로 자바스크립트 파일 최소화</li>
<li><a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a>: 특정 파일들 감시하다가, 변경되면 지정한 작업 수행</li>
<li><a href="https://github.com/gruntjs/grunt-contrib-jshint">grunt-contrib-jshint</a>: JSHint로 자바스크립트 파일 검증</li>
</ul>

<p>이하는, 오늘 작성한 <code>Gruntfile.coffee</code> 파일의 일부다.</p>

<h3 id="gruntfile-coffee-https-github-com-hatemogi-holiday-project-blob-day-18-gruntfile-coffee:3c636ce3d1e45b6e02b2bb52d247e81f"><a href="https://github.com/hatemogi/holiday-project/blob/day-18/Gruntfile.coffee">Gruntfile.coffee</a></h3>

<pre><code class="language-coffeescript">module.exports = (grunt) -&gt;
  js_files = ['app.js', 'lib/*.js', 'public/js/app.js']

  grunt.initConfig {
    # 중간 생략
    watch:  {
      coffee: {
        files: [&quot;public/assets/*.coffee&quot;]
        tasks: [&quot;coffee&quot;, &quot;uglify&quot;]
      }
      jshint: {
        files: js_files
        tasks: [&quot;jshint&quot;]
      }
    }

    jshint: {
      all: js_files
    }
  }
  # 중간 생략
  grunt.registerTask 'default', ['coffee', 'uglify']
</code></pre>

<p>기본 작업에는 <code>coffee</code>와 <code>uglify</code>를 걸어 두었고, 별도로 <code>watch</code> 작업을 추가해서,</p>

<pre><code class="language-bash">grunt watch
</code></pre>

<p>를 실행해 두고, 커피스크립트 소스파일을 편집하면, 그 후 저장할 때마다, 즉시 커피스크립트 컴파일하며, jshint로도 바로 검사한다. 더 나아가, 셀프 테스팅 코드도 <code>watch</code>에 걸어두면, 그때그때 테스트 결과도 바로 확인할 수 있겠다.</p>

<h2 id="grunt-쓸만한가:3c636ce3d1e45b6e02b2bb52d247e81f">Grunt, 쓸만한가?</h2>

<p>npm의 script 섹션을 써도 웬만큼 다 되는데, 굳이 수고를 들여 별도의 작업 실행기가 필요할까? 잠깐 살펴보니, 그래도 될 거 같다. 우선 그 약간의 수고가 크지 않게 잘 만들어져있고, 문서화도 잘 돼 있다. 무엇보다, 플러그인이 많아서, 원하는 기능을 손쉽게 가져다 쓸 수 있다.</p>

<p>그리고, 참고로, <a href="http://gruntjs-kr.herokuapp.com/">Grunt (비공식) 한글 사이트</a>도 있으니, 한글 문서로도 살펴볼 수 있어서 좋다.</p>

<p>오늘 작업을 포함해, 지금까지 진행하고 있는 내용을 GitHub에 올려놓고 있다.</p>

<blockquote>
<p><a href="https://github.com/hatemogi/holiday-project">https://github.com/hatemogi/holiday-project</a></p>
</blockquote>

<p>진행하는 내용은, <a href="/holiday-project-day-17/">어제 살펴본 Travis CI</a>로 지속적으로 통합되며, <a href="/holiday-project-day-14/">Heroku</a>에 이하 주소로 자동 스테이징되고 있다.</p>

<blockquote>
<p><a href="https://holiday-project-staging.herokuapp.com">https://holiday-project-staging.herokuapp.com</a></p>
</blockquote>

<p>오늘은 여기까지.</p>

        </div>
      </section>
    </div>
  </div>
</div>

<nav class="container">
  <ul class="pager">
    
      <li class="previous"><a href="http://hatemogi.com/holiday-project-day-17/"><i class="fa fa-chevron-left"></i> 프로젝트 17일: Travis CI, 지속적 통합 서비스 </a></li>
    
    
      <li class="next"><a href="http://hatemogi.com/holiday-project-day-19/">프로젝트 19일: RequireJS - 비동기(async) JS 로더 <i class="fa fa-chevron-right"></i></a></li>
    
  </ul>
</nav>


<div class="container layout">
<h3>30일 프로젝트 글목록</h3>
<ul class="list-unstyled">
  <li><a href="/holiday-project-day-01/">(05/07) 프로젝트 1일: 웹 브라우저 JS 테스트 환경 - karma &amp; jasmine</a></li>
  <li><a href="/holiday-project-day-02/">(05/08) 프로젝트 2일: 서버 측 JS 테스트 환경 - jasmine-node</a></li>
  <li><a href="/holiday-project-day-03/">(05/09) 프로젝트 3일: express 테스트 환경 - supertest</a></li>
  <li><a href="/holiday-project-day-04/">(05/10) 프로젝트 4일: 웹 환경 패키지 매니저 - bower</a></li>
  <li><a href="/holiday-project-day-05/">(05/11) 프로젝트 5일: 문법 하이라이팅 - highlight.js</a></li>
  <li><a href="/holiday-project-day-06/">(05/12) 프로젝트 6일: 그래프 그리기 - graphviz &amp; D3.js</a></li>
  <li><a href="/holiday-project-day-07/">(05/13) 프로젝트 7일: graphviz 노드에 웹 링크 걸기</a></li>
  <li><a href="/holiday-project-day-08/">(05/14) 프로젝트 8일: D3.js 트랜지션(Transitions)</a></li>
  <li><a href="/holiday-project-day-09/">(05/15) 프로젝트 9일: Node.js로 Git저장소 다루기</a></li>
  <li><a href="/holiday-project-day-10/">(05/16) 프로젝트 10일: Async.js로 콜백 중첩을 풀기</a></li>
  <li><a href="/holiday-project-day-11/">(05/17) 프로젝트 11일: Git 커밋 그래프 그리기 도전</a></li>
  <li><a href="/holiday-project-day-12/">(05/18) 프로젝트 12일: 그래프 그리기 도전 #2</a></li>
  <li><a href="/holiday-project-day-13/">(05/19) 프로젝트 13일: 컨테이너 기반 가상화 프레임워크 - Docker</a></li>
  <li><a href="/holiday-project-day-14/">(05/20) 프로젝트 14일: Heroku에 Node.js 애플리케이션 배포</a></li>
  <li><a href="/holiday-project-day-15/">(05/21) 프로젝트 15일: AngularJS 코드스쿨 강좌 소개</a></li>
  <li><a href="/holiday-project-day-16/">(05/22) 프로젝트 16일: 중간 점검 - 왜 이 프로젝트를 하나?</a></li>
  <li><a href="/holiday-project-day-17/">(05/23) 프로젝트 17일: Travis CI - 지속적 통합 서비스</a></li>
  <li><a href="/holiday-project-day-18/">(05/24) 프로젝트 18일: Grunt - 자바스크립트 작업 실행기</a></li>
  <li><a href="/holiday-project-day-19/">(05/25) 프로젝트 19일: RequireJS - 비동기(async) JS 로더’</a></li>
  <li><a href="/holiday-project-day-20/">(05/26) 프로젝트 20일: 회사의 합병 소식</a></li>
  <li><a href="/holiday-project-day-21/">(05/29) 프로젝트 21일: AngularJS 컨트롤러 테스트 코드</a></li>
  <li><a href="/holiday-project-day-22/">(05/31) 프로젝트 22일: Promise와 Async.js로 작성해본 콜백 코드 비교</a></li>
  <li><a href="/holiday-project-last-day/">(06/08) 프로젝트 마지막날: 결과물 미리보기</a></li>
</ul>
</div>

  <footer>
    copyright(c) 2015 hatemogi
  </footer>
  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8995709-3', 'auto');
  ga('send', 'pageview');
  </script>
</body>
</html>
