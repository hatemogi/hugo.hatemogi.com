<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="프로젝트 21일: AngularJS 컨트롤러 테스트">
  <meta property="og:type" content="website">
  <meta property="og:image" content="">
  <meta property="og:url" content="http://hatemogi.com/holiday-project-day-21/">
  <meta property="og:description" content="소프트웨어 개발자, 김대현의 블로그">
  <title>프로젝트 21일: AngularJS 컨트롤러 테스트</title>
  <link rel="canonical" href="http://hatemogi.com/holiday-project-day-21/">
  <link rel="stylesheet" href="/css/bootstrap.flatly.css">
  <link rel="stylesheet" href="/css/bootstrap-social.css">
  <link rel="stylesheet" href="/css/highlight/github.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/awjordan.css">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/highlight.pack.js"></script>
  <script src="/js/d3.min.js"></script>
  <script src="/js/hatemogi.js"></script>
</head>
<body>

<nav class="navbar navbar-default navbar-static-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand logo" href="/">
      hatemogi
      </a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="/about">소개</a></li>
      <li><a href="/post">블로그</a></li>
      
      
    </ul>
    <ul class="nav navbar-nav hidden-xs navbar-right">
      <li><a href="https://twitter.com/@hatemogi"><i class="fa fa-twitter fa-lg"></i></a></li>
      <li><a href="https://github.com/hatemogi"><i class="fa fa-github fa-lg"></i></a></li>
      <li><a href="https://medium.com/hatemogi"><i class="fa fa-medium fa-lg"></i></a></li>
    </ul>
  </div>
</nav>

<div class="layout">
  <ol class="breadcrumb">
    <li><a href="/">홈</a></li>
    <li><a href="/post">블로그</a></li>
    <li class="active">프로젝트 21일: AngularJS 컨트롤러 테스트</li>
  </ol>

  <div class="pure-u-1">
    
    <div class="posts">
      
      <section class="post">
        <header class="post-header">
          <h2 class="post-title">
            프로젝트 21일: AngularJS 컨트롤러 테스트
          </h2>

          <p class="post-meta">
            <i class="fa fa-calendar-o"></i>
            2014-05-29
            
          </p>
        </header>

        <div class="post-description">
          

<p>이 글을 작성하는 지금은, 개인 프로젝트 23일째, 지난 21일째부터 정리하지 못한 밀린 숙제를 한다.</p>

<h2 id="숙제가-밀린-이유:0e9ecd02e6cef4cd5b278fbd6fbce4df">숙제가 밀린 이유</h2>

<p>21일째에는 AngularJS 코드를 테스트하려는 노력을 기울이다가, 블로그로 정리해야 할, 밤늦은 시간에 회사 동료들을 만나러 나갔다. 합병 소식에 허전해서였을까? 같은 단지에 사는 후배이자 동료를 불러봤는데, 마침 나올 수 있다고 했고, 그렇게 한 명 두 명 즉흥적으로 불러봤는데, 결국 5명이 모여서 늦은 시간까지 시끄럽게 떠들었다.</p>

<p><img src="/img/post/holiday-project/kcircle_hagun_jhban.jpg" style="width: 400px;"/></p>

<p>한 명 더 왔었는데, 그가 왔을 때 이미 난 사진을 찍을 만한 상황이 아니었던지라, 이 사진이 전부다. 사진 잘 나왔다. 모두 다음의 탑클래스 개발자들이다. 치맥을 먹으면서도 <code>git stash</code>와 Scala의 immutable 변수 <code>val</code>을 논하는 천상 개발자들이다.</p>

<p>아무튼 즐거운 시간을 보내고 집에 돌아왔는데, 만취 상태라서 프로젝트 기록을 남기기는커녕 다음 날까지도 숙취에 정신을 못 차리고, 이제야 뒤늦은 숙제를 다시 시작했다.</p>

<h2 id="angularjs-테스트-코드:0e9ecd02e6cef4cd5b278fbd6fbce4df">AngularJS 테스트 코드</h2>

<p>AngularJS 코드 스쿨 강의를 듣기 전에는 AngularJS는 조금 거창한 SPA (단일 페이지 웹 앱)에나 써볼 만한 거창한 프레임워크라고 생각했다. 강의를 듣고 나서야, SPA를 위해서도 좋지만, 멀티 페이지로 작성하더라도, 뷰와 로직을 잘 분리해 낼 수 있는 점과, 테스트를 잘할 수 있도록 준비돼 있다는 점이 훌륭하다는 것을 알게 됐다. 아예 템플릿 프로젝트 <a href="https://github.com/angular/angular-seed">angular-seed</a>에 테스트 코드가 작성된 예제가 있다.</p>

<p>그 예제 코드와 문서를 조금 살펴보고 나서 간단히나마 컨트롤러 테스트케이스를 작성할 수 있었다.</p>

<h3 id="angular-spec-js-https-github-com-hatemogi-holiday-project-blob-day-21-public-spec-angular-spec-js:0e9ecd02e6cef4cd5b278fbd6fbce4df"><a href="https://github.com/hatemogi/holiday-project/blob/day-21/public/spec/angular_spec.js">angular_spec.js</a></h3>

<pre><code class="language-js">describe('angular 컨텍스트', function() {
  beforeEach(module(&quot;holiday&quot;));
  it(&quot;버전 확인&quot;, inject(function($controller) {
    expect(angular.version).toBeDefined();
    expect(angular.version.full).toEqual(&quot;1.3.0-beta.8&quot;);
    console.log($controller(&quot;LoginCtrl&quot;));
    expect($controller(&quot;LoginCtrl&quot;).welcome).toEqual(&quot;환영합니다&quot;);
  }));
});
</code></pre>

<p>일반적인 Jasmine 스펙 코드와 다른 점은 <code>beforeEach</code>에 있는 <code>module</code>이라는 함수와, <code>it</code>에 걸려있는 <code>inject</code>라는 함수다. 이 둘 다, <a href="https://github.com/angular/bower-angular-mocks">angular-mocks</a> 모듈이 제공해주는 함수로, 테스트를 위해 사용한다.</p>

<p><code>module(모듈명)</code> 함수는, 현재 Karma 환경에 로드된 AngularJS 앱을 기준으로 모듈을 찾아서 이하 테스트 케이스를 실행할 때 준비해준다. <code>inject</code> 함수는 콜백에서 <code>$controller</code> 파라미터를 받아서, 특정 컨트롤러를 받아올 수 있게 한다.</p>

<p>즉, <code>$controller(&quot;LoginCtrl&quot;).welcome</code>은, <a href="https://github.com/hatemogi/holiday-project/blob/day-21/public/assets/app.js.coffee">app.js.coffee</a>에 선언한 컨트롤러의 welcome 속성을 읽는다.</p>

<p>컨트롤러뿐 아니라, 필터나 디렉티브에 대한 테스트 케이스도 <a href="https://github.com/angular/angular-seed/tree/master/test/unit">angular-seed 프로젝트에서 예제</a>를 볼 수 있다.</p>

<p>사실 테스트를 자동화한다는 것이 종종 생각만큼 쉽지 않고, 어떤 부분에서는 포기하게 되기 쉬운데, AngularJS가 이 정도로 친절하게 준비해주었으니, 그전보다는 공격적으로 더 많은 부분에서 테스트를 자동화해놓을 수 있겠다.</p>

<h2 id="promise와-async:0e9ecd02e6cef4cd5b278fbd6fbce4df">Promise와 Async</h2>

<p>AngularJS의 컨트롤러 스펙을 간단히 작성해보고 뿌듯한 마음으로, <a href="/holiday-project-day-20/">20일째 조금 알아본 Promise</a>에 대해서도 더 알아보기 시작했다. <a href="holiday-project-day-10/">10일째 콜백 중첩을 풀기 위해 사용했던 Async.js</a>와 비교해보고 싶었다. 어떨 때 어떻게 어느 것을 사용하면 좋을지 궁금했던 것인데, 둘 다 작성해보고 결국 마음에 드는 결론을 얻은 것은 프로젝트 22일째였다. 22일째 기록에 해당 내용을 정리하기로 한다.</p>

<p>오늘은 여기까지.</p>

        </div>
      </section>
    </div>
  </div>
</div>

<nav class="container">
  <ul class="pager">
    
      <li class="previous"><a href="http://hatemogi.com/holiday-project-day-20/"><i class="fa fa-chevron-left"></i> 프로젝트 20일: 회사의 합병 소식 </a></li>
    
    
      <li class="next"><a href="http://hatemogi.com/holiday-project-day-22/">프로젝트 22일: Promise와 Async.js로 작성해본 콜백 코드 비교 <i class="fa fa-chevron-right"></i></a></li>
    
  </ul>
</nav>


<div class="container layout">
<h3>30일 프로젝트 글목록</h3>
<ul class="list-unstyled">
  <li><a href="/holiday-project-day-01/">(05/07) 프로젝트 1일: 웹 브라우저 JS 테스트 환경 - karma &amp; jasmine</a></li>
  <li><a href="/holiday-project-day-02/">(05/08) 프로젝트 2일: 서버 측 JS 테스트 환경 - jasmine-node</a></li>
  <li><a href="/holiday-project-day-03/">(05/09) 프로젝트 3일: express 테스트 환경 - supertest</a></li>
  <li><a href="/holiday-project-day-04/">(05/10) 프로젝트 4일: 웹 환경 패키지 매니저 - bower</a></li>
  <li><a href="/holiday-project-day-05/">(05/11) 프로젝트 5일: 문법 하이라이팅 - highlight.js</a></li>
  <li><a href="/holiday-project-day-06/">(05/12) 프로젝트 6일: 그래프 그리기 - graphviz &amp; D3.js</a></li>
  <li><a href="/holiday-project-day-07/">(05/13) 프로젝트 7일: graphviz 노드에 웹 링크 걸기</a></li>
  <li><a href="/holiday-project-day-08/">(05/14) 프로젝트 8일: D3.js 트랜지션(Transitions)</a></li>
  <li><a href="/holiday-project-day-09/">(05/15) 프로젝트 9일: Node.js로 Git저장소 다루기</a></li>
  <li><a href="/holiday-project-day-10/">(05/16) 프로젝트 10일: Async.js로 콜백 중첩을 풀기</a></li>
  <li><a href="/holiday-project-day-11/">(05/17) 프로젝트 11일: Git 커밋 그래프 그리기 도전</a></li>
  <li><a href="/holiday-project-day-12/">(05/18) 프로젝트 12일: 그래프 그리기 도전 #2</a></li>
  <li><a href="/holiday-project-day-13/">(05/19) 프로젝트 13일: 컨테이너 기반 가상화 프레임워크 - Docker</a></li>
  <li><a href="/holiday-project-day-14/">(05/20) 프로젝트 14일: Heroku에 Node.js 애플리케이션 배포</a></li>
  <li><a href="/holiday-project-day-15/">(05/21) 프로젝트 15일: AngularJS 코드스쿨 강좌 소개</a></li>
  <li><a href="/holiday-project-day-16/">(05/22) 프로젝트 16일: 중간 점검 - 왜 이 프로젝트를 하나?</a></li>
  <li><a href="/holiday-project-day-17/">(05/23) 프로젝트 17일: Travis CI - 지속적 통합 서비스</a></li>
  <li><a href="/holiday-project-day-18/">(05/24) 프로젝트 18일: Grunt - 자바스크립트 작업 실행기</a></li>
  <li><a href="/holiday-project-day-19/">(05/25) 프로젝트 19일: RequireJS - 비동기(async) JS 로더’</a></li>
  <li><a href="/holiday-project-day-20/">(05/26) 프로젝트 20일: 회사의 합병 소식</a></li>
  <li><a href="/holiday-project-day-21/">(05/29) 프로젝트 21일: AngularJS 컨트롤러 테스트 코드</a></li>
  <li><a href="/holiday-project-day-22/">(05/31) 프로젝트 22일: Promise와 Async.js로 작성해본 콜백 코드 비교</a></li>
  <li><a href="/holiday-project-last-day/">(06/08) 프로젝트 마지막날: 결과물 미리보기</a></li>
</ul>
</div>

  <footer>
    copyright(c) 2015 hatemogi
  </footer>
  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8995709-3', 'auto');
  ga('send', 'pageview');
  </script>
</body>
</html>
